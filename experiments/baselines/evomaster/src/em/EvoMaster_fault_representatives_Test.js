const superagent = require("superagent");
const EM = require("evomaster-client-js").EMTestUtils;
jest.setTimeout(60000);




/**
 * This file was automatically generated by EvoMaster on 2024-05-30T11:29:30.116Z[GMT]
 * 
 * The generated test suite contains 5 tests
 * 
 * Covered targets: 11
 * 
 * Used time: 0h 2m 27s
 * 
 * Needed budget for current results: 100%
 * 
 * This file contains one example of each category of fault. The test cases in this file are a subset of the set of test cases likely to indicate faults.
 */

const baseUrlOfSut = "http://blog:8080";


beforeAll( async () => {
});








test("test_0_with500", async () => {
    
    const res_0 = await superagent
            .get(baseUrlOfSut + "/blog?blogId=9").set('Accept', "*/*")
            .ok(res => res.status);
    
    expect(res_0.status).toBe(500);
    expect(res_0.header["content-type"].startsWith("application/json")).toBe(true);
    expect(res_0.body.status).toBe(500.0);
    expect(res_0.body.error).toBe("Internal Server Error");
    expect(res_0.body.message).toBe("Could not write JSON: Unable to find com.yd.springboottrail.entity.Blog with id 9; nested exception is com.fasterxml.jackson.databind.JsonMappingException: Unable to find com.yd.springboottrail.entity.Blog with id 9 (through reference chain: com.yd.springboottrail.Result[\"data\"]->com.yd.springboottrail.entity.Blog$HibernateProxy$mgu2dJY9[\"content\"])");
    expect(res_0.body.path).toBe("/blog");
});


test("test_1", async () => {
    
    const res_0 = await superagent
            .put(baseUrlOfSut + "/blog?" + 
                "blogId=340&" + 
                "content=XtZZJaKi8fXmPg7").set('Accept', "*/*")
            .ok(res => res.status);
    
    expect(res_0.status).toBe(200);
    expect(res_0.header["content-type"].startsWith("application/json")).toBe(true);
    expect(res_0.body.code).toBe(-1.0);
    expect(res_0.body.msg).toBe("更新失败，未找到对应博客");
    expect(res_0.body.data).toBe(null);
});


test("test_2", async () => {
    
    const res_0 = await superagent
            .post(baseUrlOfSut + "/blog?content=_EM_21_XYZ_").set('Accept', "*/*")
            .ok(res => res.status);
    
    expect(res_0.status).toBe(200);
    expect(res_0.header["content-type"].startsWith("application/json")).toBe(true);
    expect(res_0.body.code).toBe(0.0);
    expect(res_0.body.msg).toBe("成功创建博客");
    expect(res_0.body.data.content).toBe("_EM_21_XYZ_");
});


test("test_3", async () => {
    
    const res_0 = await superagent
            .delete(baseUrlOfSut + "/blog?blogId=692").set('Accept', "*/*")
            .ok(res => res.status);
    
    expect(res_0.status).toBe(200);
    expect(res_0.header["content-type"].startsWith("application/json")).toBe(true);
    expect(res_0.body.code).toBe(-1.0);
    expect(res_0.body.msg).toBe("删除失败，未找到对应博客");
    expect(res_0.body.data).toBe(null);
});


test("test_4", async () => {
    
    const res_0 = await superagent
            .get(baseUrlOfSut + "/blog?blogId=y7ELg8aBeysN7uO").set('Accept', "*/*")
            .ok(res => res.status);
    
    expect(res_0.status).toBe(400);
    expect(res_0.header["content-type"].startsWith("application/json")).toBe(true);
    expect(res_0.body.status).toBe(400.0);
    expect(res_0.body.error).toBe("Bad Request");
    expect(res_0.body.message).toBe("Failed to convert value of type 'java.lang.String' to required type 'java.lang.Integer'; nested exception is java.lang.NumberFormatException: For input string: \"y7ELg8aBeysN7uO\"");
    expect(res_0.body.path).toBe("/blog");
});
